<ion-header>
  <ion-toolbar>
    <ion-title class="h3 text-center">Create Account</ion-title>
    <ion-icon (click)="goBackToLogin()" name="arrow-back-outline" slot="start" style="zoom:2.0;"></ion-icon>
  </ion-toolbar>
</ion-header>
<ion-content>
  <div class="container min-vh-100 d-flex align-items-center">
    <div class="col py-5">
      <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
          <div>
            <form #registrationForm="ngForm">

              <div class="form-group">
                <label class="form-control-label">First Name</label>
                <div class="input-group input-group-merge">
                  <div class="input-group-prepend">
                    <span class="input-group-text"><i class="fas fa-user"></i></span>
                  </div>
                  <input type="text" class="form-control" [(ngModel)]="user.firstName" name="firstName"
                    #firstName="ngModel" required>
                </div>
                <div class="alert alert-danger" *ngIf="firstName.touched && !firstName.valid">
                  <div *ngIf="firstName.errors.required">First name is required</div>
                </div>
              </div>

              <div class="form-group">
                <label class="form-control-label">Last Name</label>
                <div class="input-group input-group-merge">
                  <div class="input-group-prepend">
                    <span class="input-group-text"><i class="fas fa-user"></i></span>
                  </div>
                  <input type="text" class="form-control" [(ngModel)]="user.lastName" name="lastName"
                    #lastName="ngModel" required>
                </div>
                <div class="alert alert-danger" *ngIf="lastName.touched && !lastName.valid">
                  <div *ngIf="lastName.errors.required">Last name is required</div>
                </div>
              </div>

              <div class="form-group">
                <label class="form-control-label">Email address</label>
                <div class="input-group input-group-merge">
                  <div class="input-group-prepend">
                    <span class="input-group-text"><i class="fas fa-user"></i></span>
                  </div>
                  <input type="email" class="form-control" id="input-email" placeholder="name@example.com" required
                    [(ngModel)]="user.email" name="email" #email="ngModel"
                    pattern="[a-zA-Z0-9_.]+@[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$">
                </div>
                <div class="alert alert-danger" *ngIf="email.touched && !email.valid">
                  <div *ngIf="email.errors.required">Email is required.</div>
                  <div *ngIf="email.errors.pattern">Invalid email format.</div>
                </div>
              </div>

              <div class="form-group mb-4">
                <label class="form-control-label">Password</label>
                <div class="input-group input-group-merge">
                  <div class="input-group-prepend">
                    <span class="input-group-text"><i class="fas fa-key"></i></span>
                  </div>
                  <input type="password" class="form-control" id="input-password" placeholder="********" required
                    [(ngModel)]="user.password" name="password" #password="ngModel" minlength="8" maxlength="20"
                    pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@$!%*#?&]).{8,20}">
                </div>
                <div class="alert alert-danger" *ngIf="password.touched && !password.valid">
                  <div *ngIf="password.errors.required">Password is required</div>
                  <div *ngIf="password.errors.pattern">Must contain an uppercase letter, a number, a
                    special character, and be
                    between 8-20 characters</div>
                </div>
              </div>

              <div class="form-group">
                <label class="form-control-label">Confirm password</label>
                <div class="input-group input-group-merge">
                  <div class="input-group-prepend">
                    <span class="input-group-text"><i class="fas fa-key"></i></span>
                  </div>
                  <input type="password" class="form-control" id="confirmPass" placeholder="********"
                    (change)="passConfirm()" [(ngModel)]="account.confirmPass" name="confirmPass" #confirmPass="ngModel"
                    minlength="8" maxlength="20" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@$!%*#?&]).{8,20}">
                </div>
                <div class="alert alert-danger" *ngIf="confirmPass.touched  && !account.isConfirmed">
                  <div ng>Password does not match</div>
                </div>
              </div>

              <div class="form-group">
                <label class="form-control-label">Date of birth</label>
                <div class="input-group input-group-merge">
                  <div class="input-group-prepend">
                    <span class="input-group-text"><i class="fas fa-user"></i></span>
                  </div>
                  <input type="date" class="form-control" placeholder="YYYY/MM/DD" [(ngModel)]="user.birthDate"
                    name="birthDate" #birthDate="ngModel" required>
                </div>
                <div class="alert alert-danger" *ngIf="birthDate.touched && !birthDate.valid">
                  <div *ngIf="birthDate.errors.required">Date of birth is required</div>
                </div>
              </div>
              <div class="form-group">
                <label class="form-control-label">Phone Number</label>
                <div class="input-group input-group-merge">
                  <div class="input-group-prepend">
                    <span class="input-group-text"><i class="fas fa-user"></i></span>
                  </div>
                  <input type="text" inputmode="tel" pattern="^((?!(0))[0-9]{10})$" required class="form-control"
                    placeholder="6131234576" [(ngModel)]="user.phone_number" name="phoneNumber" #phoneNumber="ngModel"
                    minlength="10" maxlength="10">
                </div>
                <div class="alert alert-danger" *ngIf="phoneNumber.touched && !phoneNumber.valid">
                  <div *ngIf="phoneNumber.errors.required">Phone number is required</div>
                  <div *ngIf="phoneNumber.errors.pattern">Phone number must be a length of 10, and can not start with 0
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label class="form-control-label">Address 1</label>
                <div class="input-group input-group-merge">
                  <div class="input-group-prepend">
                    <span class="input-group-text"><i class="fas fa-user"></i></span>
                  </div>
                  <input type="text" class="form-control" placeholder="123 abc street" [(ngModel)]="user.address_line_1"
                    name="address1" #address1="ngModel" required>
                </div>
                <div class="alert alert-danger" *ngIf="address1.touched && !address1.valid">
                  <div *ngIf="address1.errors.required">Address 1 is required</div>
                </div>
              </div>
              <div class="form-group">
                <label class="form-control-label">Address 2</label>
                <div class="input-group input-group-merge">
                  <div class="input-group-prepend">
                    <span class="input-group-text"><i class="fas fa-user"></i></span>
                  </div>
                  <input type="text" class="form-control" placeholder="456 abc street (optional)"
                    [(ngModel)]="user.address_line_2" name="address2" #address1="ngModel">
                </div>

              </div>
              <div class="form-group">
                <label class="form-control-label">City</label>
                <div class="input-group input-group-merge">
                  <div class="input-group-prepend">
                    <span class="input-group-text"><i class="fas fa-user"></i></span>
                  </div>
                  <input type="text" class="form-control" placeholder="Ottawa" [(ngModel)]="user.city" name="city"
                    #city="ngModel" required>
                </div>
                <div class="alert alert-danger" *ngIf="city.touched && !city.valid">
                  <div *ngIf="city.errors.required">City is required</div>
                </div>
              </div>
              <div class="form-group">
                <label class="form-control-label">Province</label>
                <div class="input-group input-group-merge">
                  <div class="input-group-prepend">
                    <span class="input-group-text"><i class="fas fa-user"></i></span>
                  </div>
                  <input type="text" class="form-control" placeholder="ON" [(ngModel)]="user.area" name="area"
                    #area="ngModel" required>
                </div>
                <div class="alert alert-danger" *ngIf="area.touched && !area.valid">
                  <div *ngIf="area.errors.required">Province is required</div>
                </div>
              </div>
              <div class="form-group">
                <label class="form-control-label">Postal Code</label>
                <div class="input-group input-group-merge">
                  <div class="input-group-prepend">
                    <span class="input-group-text"><i class="fas fa-user"></i></span>
                  </div>
                  <input type="text" class="form-control" placeholder="A1B2C3"
                    [(ngModel)]="user.postal_code" name="postalCode" #postalCode="ngModel" required
                    pattern="^[A-Za-z]\d[A-Za-z]\d[A-Za-z]\d$" maxlength="6" minlength="6">
                </div>
                <div class="alert alert-danger" *ngIf="(postalCode.touched || postalCode.dirty) && !area.valid">
                  <div *ngIf="postalCode.errors.required">Postal code is required</div>
                  <div *ngIf="postalCode.errors.pattern">Invalid postal code. (Ex: ABC123)</div>
                </div>
              </div>

              <div class="mt-4">
                <button type="button" class="btn btn-block btn-primary" [disabled]="!registrationForm.form.valid" (click)="signUp(registrationForm)">Sign Up</button></div>
            </form>
            <div class="mt-4 text-center"><small>Already have an acocunt?</small>
              <a class="small font-weight-bold"href="javascript:;"
              (click)="this.router.navigateByUrl('login')">&nbsp;Sign in</a></div>
          </div>
        </div>
      </div>
    </div>
  </div>

</ion-content>